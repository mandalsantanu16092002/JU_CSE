#include<stdio.h>
#include<stdlib.h>
#include <unistd.h>
#include <sys/wait.h>
#include <string.h>
#include <time.h>
#include <semaphore.h>
#include <fcntl.h>
#include <sys/shm.h>
#include <sys/stat.h>
#include <sys/types.h>

void iterationtest(){
    srand(time(NULL));
    for(int i=0; i<10; i++)
    {
            printf("\nPID %d: Iteration no %d\n", getpid(), i+1);
            sleep(rand()%5);
    }
}

int main()
{
    int fd[2];
    if(pipe(fd)<0) {return 2;}
    
    int id = fork(), id2;
    if(id==0) id2 = fork();
    if(id<0) {return 1;}
    if(id!=0){
        //Process X
        iterationtest();
        wait(NULL);
    }
    else{
        if(id2!=0){
        //Process Y
        iterationtest();
        }
        else{
            // Process Z
            iterationtest();
        }
    }
    return 0;
}